<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"><html><head><meta content="text/html;charset=utf-8" http-equiv="content-type"></meta><link rel="stylesheet" type="text/css" href="v8help://service_book/service_style"></link><meta name="GENERATOR" content="MSHTML 11.00.10570.1001"></meta></head><body>
<h1>Обработка "Загрузка структуры формата"</h1>
<p>Выполняет загрузку формата XDTO, при этом происходит заполнение справочников "Объекты формата", "Свойства формата", "Значения формата"</p>
<h2>Порядок действий при загрузке формата XDTO</h2>
<ol><li>Выгрузить пакет XDTO из конфигурации в файл *.xsd. Имя файла при этом принципиального значения не имеет 
</li><li>Открыть обработку "Загрузка структуры формата" 
</li><li>Указать параметры загрузки 
<ol><li><strong>Файл со структурой формата</strong> - результат выполнения п.1. После выбора файла автоматически определяется способ загрузки: если такая версия формата отсутствует, будет создана новая версия формата, в противном случае будет обновлена существующая версия формата.  
</li><li><strong>Добавлять только новые объекты, свойства, значения</strong> - при установке этого признака в процессе загрузки не будут изменены существующие элементы структуры формата, загруженные ранее. Доступен в случае, если происходит обновление существующей версии формата.</li></ol></li><li>Нажать кнопку <strong>Выполнить загрузку</strong></li></ol><p> </p>
<h2>Порядок преобразования пакета XDTO в структуру формата</h2>
<h3>Справочник "Объекты формата"</h3>
<p>В данный справочник должны быть загружены:</p>
<ul><li>Объекты с типом "ТипОбъектаXDTO", которые отражают ссылочные типы данных (документы, справочники) 
</li><li>Объекты с типом "ТипЗначенияXDTO", содержащие перечисление. Они отражают предопределенные данные (например, перечисления)</li></ul><h3>Справочник "Свойства формата"</h3>
<p>В данный справочник должны быть загружены свойства объектов формата:</p>
<ul><li>Свойства объектов "ТипОбъектаXDTO". При этом сами объекты - те что были загружены в "Объекты формата" 
</li><li>Объекты с типом "ТипОбъектаXDTO" и их свойства, которые отражают табличные части и реквизиты табличных частей</li></ul><h3>Справочник "Значения формата"</h3>
<p>В данный справочник должны быть загружены свойства объектов "ТипЗначенияXDTO", представляющие собой элементы предопределенных данных. При этом сами объекты - те что были загружены в "Объекты формата"</p>
<h2>Технические особенности загрузки структуры формата</h2>
<h3>Табличные части</h3>
<p>В общих чертах алгоритм загрузки табличных частей выглядит так:</p>
<h4>1. В объектах "ТипОбъектаXDTO" вычисляются табличные части</h4>
<p>Для того, чтобы объект формата XDTO был идентифицирован как табличная часть, он должен удовлетворять следующим критериям:</p>
<ul><li>
<div>Объект XDTO, который представляет собой саму табличную часть, имеет пустой базовый тип и только одно свойство. </div>
</li><li>
<div>У данного свойства параметр "Максимальное количество" должен быть равен "-1"</div></li></ul><h4>2. Определяются объекты "ТипОбъектаXDTO", которые содержат реквизиты табличных частей</h4>
<p>Имена таких объектов соответствуют типу единственного свойства табличной части (см. п.1). В процессе заполнения справочника "Объекты формата" те объекты, которые идентифицированы как табличные части и реквизиты табличных частей, не обрабатываются.</p>
<h4>3. Создание табличных частей в справочнике "Свойства формата"</h4>
<p>При заполнении справочника "Свойства формата" те свойства, которые соответствуют табличным частям, превращаются в группы справочника. Решение принимается на основании анализа параметра "Базовый тип" у свойства объекта XDTO </p>
<h4>4. Для каждой табличной части заполняются реквизиты</h4>
<p>На основании результатов п.2 свойства табличных частей объекта XDTO преобразуются в позиции справочника "Свойства формата", расположенные в папке, соответствующей конкретной табличной части.</p></body></html>